{"ast":null,"code":"import { ProductsService } from 'src/Service/products/products.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/Service/products/products.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../../../component/starter-products/starter-products.component\";\nimport * as i5 from \"../../../Pipes/safe-resource-url.pipe\";\nfunction ProductAdminComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"a\", 5);\n    i0.ɵɵelement(2, \"app-starter-products\");\n    i0.ɵɵelementEnd()();\n  }\n}\nconst _c0 = function (a2) {\n  return [\"/products\", \"edit\", a2];\n};\nfunction ProductAdminComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"div\", 7);\n    i0.ɵɵelement(2, \"img\", 8);\n    i0.ɵɵpipe(3, \"safeResourceUrl\");\n    i0.ɵɵelementStart(4, \"h4\", 9);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 10)(7, \"div\", 11)(8, \"span\", 12);\n    i0.ɵɵtext(9, \"Details:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"span\", 13);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"div\", 11)(13, \"span\", 12);\n    i0.ɵɵtext(14, \"Price:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"span\", 13);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"span\", 12);\n    i0.ɵɵtext(18, \"Available:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"span\", 13);\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(21, \"div\", 14)(22, \"a\", 15)(23, \"button\", 16);\n    i0.ɵɵtext(24, \"Edit Product\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(25, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function ProductAdminComponent_div_5_Template_button_click_25_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const p_r2 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.deleteProduct(p_r2.id));\n    });\n    i0.ɵɵtext(26, \"Delete\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const p_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", i0.ɵɵpipeBind1(3, 6, p_r2.image), i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Name: \", p_r2.name, \"\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(p_r2.read);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\", p_r2.price, \"$\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(p_r2.available);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(8, _c0, p_r2.id));\n  }\n}\nexport let ProductAdminComponent = /*#__PURE__*/(() => {\n  var _class;\n  class ProductAdminComponent {\n    constructor(productsService, router) {\n      this.productsService = productsService;\n      this.router = router;\n      this.products = [];\n    }\n    ngOnInit() {\n      this.productsService.getAllProducts().subscribe({\n        next: products => {\n          this.products = products;\n          this.loadProductImages();\n          console.log(products);\n        },\n        error: respose => console.log(respose)\n      });\n    }\n    loadProductImages() {\n      console.log(\"loadproduct\");\n      this.products.forEach(product => {\n        console.log(product.id);\n        this.productsService.GetImage(product.id).subscribe({\n          next: ImageData => product.image = URL.createObjectURL(ImageData),\n          error: error => console.error(error)\n        });\n        console.log(product.image);\n      });\n    }\n    deleteProduct(id) {\n      if (confirm('Are you sure you want to delete this product?')) {\n        this.productsService.deleteProduct(id).subscribe({\n          next: response => {\n            alert('Product deleted successfully.');\n            window.location.reload(); // refresh the page\n          }\n        });\n      }\n    }\n  }\n  _class = ProductAdminComponent;\n  _class.ɵfac = function ProductAdminComponent_Factory(t) {\n    return new (t || _class)(i0.ɵɵdirectiveInject(i1.ProductsService), i0.ɵɵdirectiveInject(i2.Router));\n  };\n  _class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _class,\n    selectors: [[\"app-product-admin\"]],\n    features: [i0.ɵɵProvidersFeature([ProductsService])],\n    decls: 6,\n    vars: 2,\n    consts: [[1, \"add\"], [\"href\", \"AddProduct\"], [4, \"ngIf\"], [1, \"product-grid\"], [\"class\", \"product-item\", 4, \"ngFor\", \"ngForOf\"], [\"href\", \"products\"], [1, \"product-item\"], [1, \"product-image\"], [\"alt\", \"no image\", 1, \"product.image\", 3, \"src\"], [1, \"product-name\"], [1, \"product-details\"], [1, \"product-info\"], [1, \"label\"], [1, \"value\"], [1, \"button-group\"], [3, \"routerLink\"], [1, \"btn\", \"btn-success\"], [1, \"btn\", \"btn-danger\", 3, \"click\"]],\n    template: function ProductAdminComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"a\", 1);\n        i0.ɵɵtext(2, \"Add Product\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(3, ProductAdminComponent_div_3_Template, 3, 0, \"div\", 2);\n        i0.ɵɵelementStart(4, \"div\", 3);\n        i0.ɵɵtemplate(5, ProductAdminComponent_div_5_Template, 27, 10, \"div\", 4);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.products.length === 0);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.products);\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf, i2.RouterLink, i4.StarterProductsComponent, i5.SafeResourceUrlPipe],\n    styles: [\".product-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;margin:20px 0}.add[_ngcontent-%COMP%]{text-align:center;margin:10px 0}.add[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;border:2px solid #007bff;border-radius:5px;text-decoration:none;color:#007bff;font-weight:700}.add[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#007bff;color:#fff}.product-item[_ngcontent-%COMP%]{flex:0 0 calc(33.33% - 20px);padding:20px;border:1px solid #ccc;border-radius:5px;box-shadow:0 2px 4px #0000001a;background-color:#fff;margin-bottom:20px;text-align:center}.product-item[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100px}.product-item[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{margin-top:10px;font-size:16px}.product-item[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]{margin-top:10px}.product-item[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:5px}.product-item[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:700;margin-right:5px}.product-item[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{flex:1}.product-item[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:10px}.product-item[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;border:none;padding:5px 10px;border-radius:5px;cursor:pointer}.product-item[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none;padding:5px 10px;border-radius:5px;cursor:pointer}\"]\n  });\n  return ProductAdminComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}