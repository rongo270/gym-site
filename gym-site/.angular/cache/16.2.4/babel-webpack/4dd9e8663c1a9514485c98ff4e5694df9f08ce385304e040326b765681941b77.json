{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport * as jwt_decode from 'jwt-decode';\nimport * as i0 from \"@angular/core\";\nexport let CartService = /*#__PURE__*/(() => {\n  var _class;\n  class CartService {\n    constructor() {\n      this.cartItems = [];\n      this.cartItemsSubject = new BehaviorSubject([]);\n      // Initialize the cart from local storage if available\n      const storedCart = localStorage.getItem('shoppingCart');\n      if (storedCart) {\n        this.cartItems = JSON.parse(storedCart);\n        this.cartItemsSubject.next(this.cartItems);\n      }\n    }\n    getCartItems() {\n      return this.cartItemsSubject;\n    }\n    addToCart(product) {\n      this.cartItems.push(product);\n      this.cartItemsSubject.next(this.cartItems);\n      this.saveCartToLocalStorage();\n    }\n    removeFromCart(productId) {\n      this.cartItems = this.cartItems.filter(item => item.id !== productId);\n      this.cartItemsSubject.next(this.cartItems);\n      this.saveCartToLocalStorage();\n    }\n    clearCart() {\n      this.cartItems = [];\n      this.cartItemsSubject.next(this.cartItems);\n      this.clearCartFromLocalStorage();\n    }\n    saveCartToLocalStorage() {\n      localStorage.setItem('shoppingCart', JSON.stringify(this.cartItems));\n    }\n    clearCartFromLocalStorage() {\n      localStorage.removeItem('shoppingCart');\n    }\n    updateCartInToken(newCartData) {\n      // Get the existing token\n      const token = localStorage.getItem('jwt_token');\n      const decodedToken = jwt_decode(token);\n      decodedToken.cart = newCartData;\n      localStorage.setItem('jwt_token', JSON.stringify(decodedToken));\n    }\n  }\n  _class = CartService;\n  _class.ɵfac = function CartService_Factory(t) {\n    return new (t || _class)();\n  };\n  _class.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: _class,\n    factory: _class.ɵfac,\n    providedIn: 'root'\n  });\n  return CartService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}