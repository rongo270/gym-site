{"ast":null,"code":"var _class;\nimport { EventEmitter } from '@angular/core';\nimport { HttpEventType } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../../Service/products/products.service\";\nimport * as i3 from \"@angular/common\";\nfunction UploadImageComponent_span_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 7);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.progress, \"% \");\n  }\n}\nfunction UploadImageComponent_span_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 7);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.message, \" \");\n  }\n}\nexport class UploadImageComponent {\n  constructor(http, productService) {\n    this.http = http;\n    this.productService = productService;\n    this.onUploadFinished = new EventEmitter();\n    this.productName = '';\n    this.uploadFile = (files, name) => {\n      if (files.length === 0) {\n        return;\n      }\n      let fileToUpload = files[0];\n      const formData = new FormData();\n      formData.append('file', fileToUpload, name + '.jpg');\n      this.productService.PostImage(formData).subscribe({\n        next: event => {\n          if (event.type === HttpEventType.UploadProgress) this.progress = Math.round(100 * event.loaded / event.total);else if (event.type === HttpEventType.Response) {\n            this.message = 'Upload success.';\n            this.onUploadFinished.emit(event.body);\n            //location.reload();\n          }\n        },\n\n        error: err => console.log(err)\n      });\n    };\n  }\n  ngOnInit() {}\n}\n_class = UploadImageComponent;\n_class.ɵfac = function UploadImageComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.ProductsService));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-upload-image\"]],\n  inputs: {\n    productName: \"productName\"\n  },\n  outputs: {\n    onUploadFinished: \"onUploadFinished\"\n  },\n  decls: 9,\n  vars: 2,\n  consts: [[1, \"mt-5\"], [1, \"container-fluid\"], [\"type\", \"file\", \"placeholder\", \"Choose file\", 2, \"display\", \"none\", 3, \"change\"], [\"file\", \"\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\", 3, \"click\"], [1, \"col-md-4\"], [\"class\", \"upload\", 4, \"ngIf\"], [1, \"upload\"]],\n  template: function UploadImageComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r3 = i0.ɵɵgetCurrentView();\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"input\", 2, 3);\n      i0.ɵɵlistener(\"change\", function UploadImageComponent_Template_input_change_2_listener() {\n        i0.ɵɵrestoreView(_r3);\n        const _r0 = i0.ɵɵreference(3);\n        return i0.ɵɵresetView(ctx.uploadFile(_r0.files, ctx.productName));\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"button\", 4);\n      i0.ɵɵlistener(\"click\", function UploadImageComponent_Template_button_click_4_listener() {\n        i0.ɵɵrestoreView(_r3);\n        const _r0 = i0.ɵɵreference(3);\n        return i0.ɵɵresetView(_r0.click());\n      });\n      i0.ɵɵtext(5, \" Image \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(6, \"div\", 5);\n      i0.ɵɵtemplate(7, UploadImageComponent_span_7_Template, 2, 1, \"span\", 6);\n      i0.ɵɵtemplate(8, UploadImageComponent_span_8_Template, 2, 1, \"span\", 6);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngIf\", ctx.progress > 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.message);\n    }\n  },\n  dependencies: [i3.NgIf],\n  styles: [\"\\n\\n.mt-5[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center; \\n\\n  margin-top: 20px;\\n}\\n\\n\\n\\nbutton.btn.btn-success[_ngcontent-%COMP%] {\\n  background-color: #28a745; \\n\\n  color: #fff; \\n\\n  padding: 8px 16px; \\n\\n  border: none;\\n  border-radius: 4px;\\n  cursor: pointer;\\n}\\n\\nbutton.btn.btn-success[_ngcontent-%COMP%]:hover {\\n  background-color: #218838; \\n\\n}\\n\\n\\n\\n.col-md-4[_ngcontent-%COMP%] {\\n  text-align: center;\\n  margin-top: 10px;\\n}\\n\\n.upload[_ngcontent-%COMP%] {\\n  font-size: 18px;\\n  font-weight: bold;\\n  color: #333; \\n\\n  display: block;\\n  margin-top: 5px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9jb21wb25lbnQvdXBsb2FkLWltYWdlL3VwbG9hZC1pbWFnZS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvQ0FBQTtBQUNBO0VBQ0UsYUFBQTtFQUNBLHNCQUFBO0VBQ0EsbUJBQUE7RUFDQSx1QkFBQSxFQUFBLHVDQUFBO0VBQ0EsZ0JBQUE7QUFDRjs7QUFFQSxnQ0FBQTtBQUNBO0VBQ0UseUJBQUEsRUFBQSwrQkFBQTtFQUNBLFdBQUEsRUFBQSxxQkFBQTtFQUNBLGlCQUFBLEVBQUEsMENBQUE7RUFDQSxZQUFBO0VBQ0Esa0JBQUE7RUFDQSxlQUFBO0FBQ0Y7O0FBRUE7RUFDRSx5QkFBQSxFQUFBLG1DQUFBO0FBQ0Y7O0FBRUEseUNBQUE7QUFDQTtFQUNFLGtCQUFBO0VBQ0EsZ0JBQUE7QUFDRjs7QUFFQTtFQUNFLGVBQUE7RUFDQSxpQkFBQTtFQUNBLFdBQUEsRUFBQSx5QkFBQTtFQUNBLGNBQUE7RUFDQSxlQUFBO0FBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBTdHlsZSB0aGUgZmlsZSB1cGxvYWQgY29udGFpbmVyICovXHJcbi5tdC01IHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgLyogQ2VudGVyIHZlcnRpY2FsbHkgYW5kIGhvcml6b250YWxseSAqL1xyXG4gIG1hcmdpbi10b3A6IDIwcHg7XHJcbn1cclxuXHJcbi8qIFN0eWxlIHRoZSBmaWxlIGlucHV0IGJ1dHRvbiAqL1xyXG5idXR0b24uYnRuLmJ0bi1zdWNjZXNzIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjhhNzQ1OyAvKiBHcmVlbiBjb2xvciBmb3IgdGhlIGJ1dHRvbiAqL1xyXG4gIGNvbG9yOiAjZmZmOyAvKiBXaGl0ZSB0ZXh0IGNvbG9yICovXHJcbiAgcGFkZGluZzogOHB4IDE2cHg7IC8qIEFkanVzdGVkIHBhZGRpbmcgZm9yIGEgc21hbGxlciBidXR0b24gKi9cclxuICBib3JkZXI6IG5vbmU7XHJcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxufVxyXG5cclxuYnV0dG9uLmJ0bi5idG4tc3VjY2Vzczpob3ZlciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzIxODgzODsgLyogU2xpZ2h0bHkgZGFya2VyIGdyZWVuIG9uIGhvdmVyICovXHJcbn1cclxuXHJcbi8qIFN0eWxlIHRoZSBwcm9ncmVzcyBhbmQgbWVzc2FnZSBzcGFucyAqL1xyXG4uY29sLW1kLTQge1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICBtYXJnaW4tdG9wOiAxMHB4O1xyXG59XHJcblxyXG4udXBsb2FkIHtcclxuICBmb250LXNpemU6IDE4cHg7XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgY29sb3I6ICMzMzM7IC8qIERhcmsgZ3JheSB0ZXh0IGNvbG9yICovXHJcbiAgZGlzcGxheTogYmxvY2s7XHJcbiAgbWFyZ2luLXRvcDogNXB4O1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"names":["EventEmitter","HttpEventType","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r1","progress","ctx_r2","message","UploadImageComponent","constructor","http","productService","onUploadFinished","productName","uploadFile","files","name","length","fileToUpload","formData","FormData","append","PostImage","subscribe","next","event","type","UploadProgress","Math","round","loaded","total","Response","emit","body","error","err","console","log","ngOnInit","ɵɵdirectiveInject","i1","HttpClient","i2","ProductsService","selectors","inputs","outputs","decls","vars","consts","template","UploadImageComponent_Template","rf","ctx","ɵɵlistener","UploadImageComponent_Template_input_change_2_listener","ɵɵrestoreView","_r3","_r0","ɵɵreference","ɵɵresetView","UploadImageComponent_Template_button_click_4_listener","click","ɵɵtemplate","UploadImageComponent_span_7_Template","UploadImageComponent_span_8_Template","ɵɵproperty"],"sources":["C:\\angular\\gym-site\\src\\component\\upload-image\\upload-image.component.ts","C:\\angular\\gym-site\\src\\component\\upload-image\\upload-image.component.html"],"sourcesContent":["import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { ProductsService } from '../../Service/products/products.service';\r\nimport {  HttpClient, HttpEventType, HttpErrorResponse}from '@angular/common/http'\n\n@Component({\n  selector: 'app-upload-image',\n  templateUrl: './upload-image.component.html',\n  styleUrls: ['./upload-image.component.scss']\n})\nexport class UploadImageComponent implements OnInit {\n  progress!: number;\n  message!: string;\n  @Output() public onUploadFinished = new EventEmitter();\n  @Input() productName: string = '';\n  constructor(private http: HttpClient, private productService: ProductsService) { }\n  ngOnInit() { }\n\n\n  uploadFile = (files: any, name: string) => {\n    if (files.length === 0) {\n      return;\n    }\n    let fileToUpload = <File>files[0];\n    const formData = new FormData();\n    formData.append('file', fileToUpload, name + '.jpg');\n\n    this.productService.PostImage(formData).subscribe({\n      next: (event) => {\n        if (event.type === HttpEventType.UploadProgress)\n          this.progress = Math.round((100 * event.loaded) / event.total!);\n        else if (event.type === HttpEventType.Response) {\n          this.message = 'Upload success.';\n          this.onUploadFinished.emit(event.body);\n          //location.reload();\n        }\n      },\n      error: (err: HttpErrorResponse) => console.log(err),\n    });\n  };\n}\n","<div class=\"mt-5\">\n  <div class=\"container-fluid\">\n    <input type=\"file\"\n           #file\n           placeholder=\"Choose file\"\n           (change)=\"uploadFile(file.files, productName)\"\n           style=\"display: none\" />\n    <button type=\"button\" class=\"btn btn-success\" (click)=\"file.click()\">\n      Image\n    </button>\n  </div>\n  <div class=\"col-md-4\">\n    <span class=\"upload\" *ngIf=\"progress > 0\"> {{ progress }}% </span>\n    <span class=\"upload\" *ngIf=\"message\">\n      {{ message }}\n    </span>\n  </div>\n</div>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}