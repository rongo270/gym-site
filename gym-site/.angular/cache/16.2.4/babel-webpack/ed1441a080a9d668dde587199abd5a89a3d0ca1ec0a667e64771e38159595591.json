{"ast":null,"code":"import _asyncToGenerator from \"C:/angular/gym-site/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/Service/Users/users.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction LoginFormComponent_div_1_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵtext(1, \" Invalid name or password \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginFormComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"form\", 2, 3);\n    i0.ɵɵlistener(\"ngSubmit\", function LoginFormComponent_div_1_Template_form_ngSubmit_1_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const _r3 = i0.ɵɵreference(2);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.login(_r3));\n    });\n    i0.ɵɵelementStart(3, \"div\", 0)(4, \"h1\", 4);\n    i0.ɵɵtext(5, \"Login\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, LoginFormComponent_div_1_div_6_Template, 2, 0, \"div\", 5);\n    i0.ɵɵelement(7, \"br\");\n    i0.ɵɵelementStart(8, \"div\")(9, \"label\", 6);\n    i0.ɵɵtext(10, \"Email:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(11, \"input\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\")(13, \"label\", 8);\n    i0.ɵɵtext(14, \"Password:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(15, \"input\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(16, \"br\");\n    i0.ɵɵelementStart(17, \"button\", 10);\n    i0.ɵɵtext(18, \"Login\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.invalidLogin);\n  }\n}\nfunction LoginFormComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h1\", 4);\n    i0.ɵɵtext(2, \"You are logged in !\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction LoginFormComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"dont have a user, click \");\n    i0.ɵɵelementStart(2, \"a\", 12);\n    i0.ɵɵtext(3, \"here\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \" to creat\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class LoginFormComponent {\n  // For Local Creds Saving\n  constructor(router, usersService) {\n    this.router = router;\n    this.usersService = usersService;\n    this.invalidLogin = false;\n    this.LoggedIn = false;\n    this.myUser = {\n      id: '',\n      email: '',\n      password: '',\n      name: '',\n      lastName: '',\n      phone: '',\n      member: false,\n      admin: false\n    };\n  }\n  ngOnInit() {\n    this.usersService.IsUserAuthenticated();\n    this.LoggedIn = this.usersService.LogStatus;\n  }\n  UserAuthenticated() {\n    this.usersService.IsUserAuthenticated();\n  }\n  login(form) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const credentials = {\n        email: form.value.email,\n        password: form.value.password\n      };\n      _this.myUser.email = credentials.email;\n      _this.myUser.password = credentials.password;\n      console.log(_this.myUser.email);\n      console.log(_this.myUser.password);\n      yield _this.usersService.PostLogin(credentials).subscribe(response => {\n        const token = response.token;\n        localStorage.setItem('jwt', token);\n        _this.invalidLogin = false;\n        if (_this.usersService.IsUserAuthenticated()) {\n          _this.usersService.LogStatus = true;\n        }\n        location.reload();\n      }, err => {\n        _this.invalidLogin = true;\n      });\n    })();\n  }\n}\n_class = LoginFormComponent;\n_class.ɵfac = function LoginFormComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.UsersService));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-login-form\"]],\n  decls: 4,\n  vars: 3,\n  consts: [[1, \"container-xxl\", \"mt-5\"], [4, \"ngIf\"], [1, \"form-signin\", 3, \"ngSubmit\"], [\"loginForm\", \"ngForm\"], [1, \"center\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [\"for\", \"email\", 1, \"sr-only\"], [\"name\", \"email\", \"type\", \"text\", \"id\", \"email\", \"ngModel\", \"\", \"placeholder\", \"email\", \"required\", \"\", \"autofocus\", \"\", 1, \"form-control\"], [\"for\", \"password\", 1, \"sr-only\"], [\"name\", \"password\", \"type\", \"password\", \"id\", \"password\", \"ngModel\", \"\", \"placeholder\", \"password\", \"required\", \"\", \"autofocus\", \"\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"btn-dark\"], [1, \"alert\", \"alert-danger\"], [\"href\", \"sign-in\"]],\n  template: function LoginFormComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtemplate(1, LoginFormComponent_div_1_Template, 19, 1, \"div\", 1);\n      i0.ɵɵtemplate(2, LoginFormComponent_div_2_Template, 3, 0, \"div\", 1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(3, LoginFormComponent_div_3_Template, 5, 0, \"div\", 1);\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.LoggedIn);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.LoggedIn);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.LoggedIn == false);\n    }\n  },\n  dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm],\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","LoginFormComponent_div_1_Template_form_ngSubmit_1_listener","ɵɵrestoreView","_r6","_r3","ɵɵreference","ctx_r5","ɵɵnextContext","ɵɵresetView","login","ɵɵtemplate","LoginFormComponent_div_1_div_6_Template","ɵɵelement","ɵɵadvance","ɵɵproperty","ctx_r0","invalidLogin","LoginFormComponent","constructor","router","usersService","LoggedIn","myUser","id","email","password","name","lastName","phone","member","admin","ngOnInit","IsUserAuthenticated","LogStatus","UserAuthenticated","form","_this","_asyncToGenerator","credentials","value","console","log","PostLogin","subscribe","response","token","localStorage","setItem","location","reload","err","ɵɵdirectiveInject","i1","Router","i2","UsersService","selectors","decls","vars","consts","template","LoginFormComponent_Template","rf","ctx","LoginFormComponent_div_1_Template","LoginFormComponent_div_2_Template","LoginFormComponent_div_3_Template"],"sources":["C:\\angular\\gym-site\\src\\component\\login-form\\login-form.component.ts","C:\\angular\\gym-site\\src\\component\\login-form\\login-form.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { NgForm } from '@angular/forms';\nimport { UsersService } from 'src/Service/Users/users.service';\nimport { user } from 'src/models/user.model';\n\n\n\n\n\n@Component({\n  selector: 'app-login-form',\n  templateUrl: './login-form.component.html',\n  styleUrls: ['./login-form.component.scss']\n})\nexport class LoginFormComponent {\n  invalidLogin: boolean = false;\n  LoggedIn: boolean = false;\n  myUser: user = {\n    id: '',\n    email: '',\n    password: '',\n    name: '',\n    lastName: '',\n    phone: '',\n    member: false,\n    admin: false\n  };\n\n  // For Local Creds Saving\n  constructor(private router: Router, private usersService: UsersService) { }\n\n  ngOnInit(): void {\n    this.usersService.IsUserAuthenticated();\n    this.LoggedIn = this.usersService.LogStatus;\n  }\n  public UserAuthenticated() {\n    this.usersService.IsUserAuthenticated();\n  }\n\n  async login(form: NgForm) {\n    const credentials = {\n      email: form.value.email,\n      password: form.value.password,\n    };\n\n    this.myUser.email = credentials.email;\n    this.myUser.password = credentials.password;\n    console.log(this.myUser.email);\n    console.log(this.myUser.password);\n\n    await this.usersService.PostLogin(credentials).subscribe(\n      (response) => {\n        const token = (<any>response).token;\n        localStorage.setItem('jwt', token);\n        this.invalidLogin = false;\n        if (this.usersService.IsUserAuthenticated()) {\n          this.usersService.LogStatus = true;\n        }\n        location.reload();\n      },\n      (err) => {\n        this.invalidLogin = true;\n      }\n    );\n  }\n}\n","<div class=\"container-xxl mt-5\">\n  <div *ngIf=\"!LoggedIn\">\n    <form class=\"form-signin\" #loginForm=\"ngForm\" (ngSubmit)=\"login(loginForm)\">\n      <div class=\"container-xxl mt-5\">\n        <h1 class=\"center\">Login</h1>\n        <div *ngIf=\"invalidLogin\" class=\"alert alert-danger\">\n          Invalid name or password\n        </div>\n        <br />\n        <div>\n          <label for=\"email\" class=\"sr-only\">Email:</label>\n          <input name=\"email\"\n                 type=\"text\"\n                 id=\"email\"\n                 ngModel\n                 class=\"form-control\"\n                 placeholder=\"email\"\n                 required\n                 autofocus />\n        </div>\n        <div>\n          <label for=\"password\" class=\"sr-only\">Password:</label>\n          <input name=\"password\"\n                 type=\"password\"\n                 id=\"password\"\n                 ngModel\n                 class=\"form-control\"\n                 placeholder=\"password\"\n                 required\n                 autofocus />\n        </div>\n        <br />\n        <button class=\"btn btn-dark\" type=\"submit\">Login</button>\n      </div>\n    </form>\n  </div>\n  <div *ngIf=\"LoggedIn\">\n    <h1 class=\"center\">You are logged in !</h1>\n  </div>\n</div>\n<div *ngIf=\"LoggedIn == false\">dont have a user, click <a href=\"sign-in\">here</a> to creat</div>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}